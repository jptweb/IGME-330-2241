(()=>{"use strict";var e,t,n,o,c,a,r,l,s,i,u,d=Object.freeze({gain:.5,numSamples:256}),h=(new Uint8Array(d.numSamples/2),function(e){t.src=e}),g=function(e,t,n,o){return void 0===o&&(o=1),"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(o,")")},f={showGradient:!0,showBars:!0,showCircles:!0,showNoise:!1,showInvert:!1,showEmboss:!1},v=Object.freeze({sound1:"media/New Adventure Theme.mp3"});function m(){var g,m,y;console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((y=function(){return 185*Math.random()+35})(),",").concat(y(),",").concat(y(),",1)"))),g=v.sound1,m=window.AudioContext,e=new m,t=new Audio,h(g),n=e.createMediaElementSource(t),(o=e.createAnalyser()).fftSize=d.numSamples,(c=e.createGain()).gain.value=d.gain,n.connect(o),o.connect(c),c.connect(e.destination);var S=document.querySelector("canvas");!function(n){document.querySelector("#fsButton").onclick=function(e){var t;console.log("goFullscreen() called"),(t=n).requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()};var o=document.querySelector("#playButton");o.onclick=function(n){console.log("audioCtx.state before = ".concat(e.state)),"suspended"==e.state&&e.resume(),console.log("audioCtx.state after = ".concat(e.state));var o=n.target;"no"==o.dataset.playing?(t.play(),o.dataset.playing="yes"):(t.pause(),o.dataset.playing="no")};var a=document.querySelector("#volumeSlider"),r=document.querySelector("#volumeLabel");a.oninput=function(e){var t,n=e.target;t=n.value,t=Number(t),c.gain.value=t,r.innerHTML=Math.round(parseInt(n.value)/2*100).toString()},a.dispatchEvent(new Event("input")),document.querySelector("#trackSelect").onchange=function(e){var t=e.target;h(t.value),"yes"==o.dataset.playing&&o.dispatchEvent(new MouseEvent("click"))};var l=document.querySelector("#gradientCB"),s=document.querySelector("#barsCB"),i=document.querySelector("#circlesCB");l.checked=!0,l.onchange=function(e){f.showGradient=l.checked},s.checked=!0,s.onchange=function(e){f.showBars=s.checked},i.checked=!0,i.onchange=function(e){f.showCircles=i.checked};var u=document.querySelector("#noiseCB");u.onchange=function(e){f.showNoise=u.checked};var d=document.querySelector("#invertCB");d.onchange=function(e){f.showInvert=d.checked};var g=document.querySelector("#embossCB");g.onchange=function(e){f.showEmboss=g.checked}}(S),function(e,t){a=e.getContext("2d"),r=e.width,l=e.height,s=function(e,t,n,o,c){for(var a=e.createLinearGradient(0,0,0,c),r=0,l=[{percent:0,color:"#247c82"},{percent:.4,color:"#6e98db"},{percent:.6,color:"#5aad88"},{percent:1,color:"#248258"}];r<l.length;r++){var s=l[r];a.addColorStop(s.percent,s.color)}return a}(a,0,0,0,l),i=t,u=new Uint8Array(i.fftSize/2)}(S,o),w()}function w(){requestAnimationFrame(w),function(e){if(i.getByteFrequencyData(u),a.save(),a.fillStyle="black",a.globalAlpha=.1,a.fillRect(0,0,r,l),a.restore(),e.showGradient&&(a.save(),a.fillStyle=s,a.globalAlpha=.3,a.fillRect(0,0,r,l),a.restore()),e.showBars){var t=(r-4*u.length-10)/u.length;a.save(),a.fillStyle="rgba(255,255,255,0.50)",a.strokeStyle="rgba(0,0,0,0.50)";for(var n=0;n<u.length;n++)a.fillRect(5+n*(t+4),356-u[n],t,200),a.strokeRect(5+n*(t+4),356-u[n],t,200);a.restore()}if(e.showCircles){var o=l/4;for(a.save(),a.globalAlpha=.5,n=0;n<u.length;n++){var c=u[n]/255,d=c*o;a.beginPath(),a.fillStyle=g(255,111,111,.35-c/3),a.arc(r/2,l/2,d,0,2*Math.PI,!1),a.fill(),a.closePath(),a.beginPath(),a.fillStyle=g(0,0,255,.1-c/10),a.arc(r/2,l/2,1.5*d,0,2*Math.PI,!1),a.fill(),a.closePath(),a.save(),a.beginPath(),a.fillStyle=g(200,200,0,.5-c/5),a.arc(r/2,l/2,.5*d,0,2*Math.PI,!1),a.fill(),a.closePath(),a.restore()}a.restore()}var h=a.getImageData(0,0,r,l),f=h.data,v=f.length,m=h.width;for(n=0;n<v;n+=4)if(e.showNoise&&Math.random()<.05&&(f[n]=67,f[n+1]=36,f[n+2]=130),e.showInvert){var w=f[n],y=f[n+1],S=f[n+2];f[n]=255-w,f[n+1]=255-y,f[n+2]=255-S}if(e.showEmboss)for(n=0;n<v;n++)n%4!=3&&(f[n]=127+2*f[n]-f[n+4]-f[n+4*m]);a.putImageData(h,0,0)}(f)}window.onload=function(){console.log("window.onload called"),m()}})();
//# sourceMappingURL=bundle.js.map